function FrontBase(){}function Auth(){this.maskwrapper=$(".mask-wrapper")}FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},FrontBase.prototype.run=function(){this.listenAuthBoxHover()},$(function(){(new FrontBase).run()}),Auth.prototype.run=function(){var t=this;t.listenShowEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenImgCaptcha(),t.listenSmsCaptcha(),t.listenSignupEvent()},Auth.prototype.showEvent=function(){this.maskwrapper.show()},Auth.prototype.hideEvent=function(){this.maskwrapper.hide()},Auth.prototype.listenSwitchEvent=function(){$(".switch").click(function(){var t=$(".scroll-wrapper"),n=t.css("left");(n=parseInt(n))<0?t.animate({left:"0"}):t.animate({left:"-400px"})})},Auth.prototype.listenShowEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),i=$(".close-btn"),a=$(".scroll-wrapper");n.click(function(){t.showEvent(),a.css({left:"0"})}),e.click(function(){t.showEvent(),a.css({left:"-400px"})}),i.click(function(){t.hideEvent()})},Auth.prototype.listenImgCaptcha=function(){var t=$(".img_captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.listenSmsCaptcha=function(){var i=this,a=$(".sms-captcha-btn"),n=$(".signup-group input[name='telephone']");a.click(function(){var t=n.val();t?xfzajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){if(200===t.code){messageBox.showSuccess("短信验证码发送成功"),a.addClass("disabled");var n=60;a.unbind("click");var e=setInterval(function(){a.text(n+"s"),(n-=1)<=0&&(clearInterval(e),a.removeClass("disabled"),a.text("发送验证码"),i.listenSmsCaptcha())},1e3)}},fail:function(){}}):messageBox.showInfo("请输入手机号码！")})},Auth.prototype.listenSignupEvent=function(){var h=this,f=$(".signup-group");f.find(".submit-btn").click(function(){var t=f.find("input[name='telephone']"),n=f.find("input[name='username']"),e=f.find("input[name='img_captcha']"),i=f.find("input[name='password1']"),a=f.find("input[name='password2']"),o=f.find("input[name='sms_captcha']"),s=t.val(),c=n.val(),p=e.val(),r=i.val(),u=a.val(),l=o.val();xfzajax.post({url:"/account/register/",data:{telephone:s,username:c,img_captcha:p,password1:r,password2:u,sms_captcha:l},success:function(t){h.hideEvent(),window.location.reload()}})})},Auth.prototype.listenSigninEvent=function(){var i=this,t=$(".signin-group"),a=t.find("input[name='telephone']"),o=t.find("input[name='password']"),s=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=a.val(),n=o.val(),e=s.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){i.hideEvent(),window.location.reload()}})})},$(function(){(new Auth).run()});