function Banner(){this.bannergroup=$("#banner-group"),this.index=1,this.left_arrow=$(".left-arrow"),this.right_arrow=$(".right-arrow"),this.bannerul=$("#banner-ul"),this.lilist=this.bannerul.children("li"),this.bannercount=this.lilist.length,this.pagecontrol=$(".page-control")}function Index(){this.page=2,this.category_id=0,template.defaults.imports.dateFormat=function(n){var e=new Date(n),t=e.getTime(),i=((new Date).getTime()-t)/1e3;return i<60?"刚刚":60<=i&&i<3600?(minutes=parseInt(i/60),minutes+"分钟前"):3600<=i&&i<86400?(hours=parseInt(i/60/60),hours+"小时前"):86400<=i&&i<2592e3?(days=parseInt(i/60/60/24),days+"天前"):e.getFullYear()+"/"+e.getMonth()+"/"+e.getDay()+" "+e.getHours()+":"+e.getMinutes()}}Banner.prototype.initBanner=function(){self=this;var n=self.lilist.eq(0).clone(),e=self.lilist.eq(self.bannercount-1).clone();self.bannerul.append(n),self.bannerul.prepend(e),self.bannerul.css({width:798*(self.bannercount+2),left:-798})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannercount;e++){var t=$("<li></li>");n.pagecontrol.append(t),0===e&&t.addClass("active")}n.pagecontrol.css({width:16*(n.bannercount-1)+16+12*n.bannercount})},Banner.prototype.togglenarrow=function(n){n?(this.left_arrow.show(),this.right_arrow.show()):(this.left_arrow.hide(),this.right_arrow.hide())},Banner.prototype.listenArrowClick=function(){var n=this;n.left_arrow.click(function(){0===n.index?(n.bannerul.css({left:-798*n.bannercount}),n.index=n.bannercount-1):n.index--,n.animate()}),n.right_arrow.click(function(){n.index===n.bannercount+1?(n.bannerul.css({left:-798}),n.index=2):n.index++,n.animate()})},Banner.prototype.loop=function(){$("#banner-ul");var n=this;this.time=setInterval(function(){n.index>=n.bannercount+1?(n.bannerul.css({left:-798}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.animate=function(){var n=this;n.bannerul.stop().animate({left:-798*n.index},500);var e=n.index;0===e?e=n.bannercount-1:e===n.bannercount+1?e=0:e-=1,n.pagecontrol.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.listenBannerHover=function(){var n=this;this.bannergroup.hover(function(){clearInterval(n.time),n.togglenarrow(!0)},function(){n.loop(),n.togglenarrow(!1)})},Banner.prototype.listenPageControl=function(){var t=this;t.pagecontrol.children("li").each(function(n,e){$(e).click(function(){t.index=n+1,t.animate()})})},Banner.prototype.run=function(){this.loop(),this.listenArrowClick(),this.initPageControl(),this.initBanner(),this.listenBannerHover(),this.listenPageControl()},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this),a=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:a,p:1},success:function(n){if(200===n.code){var e=n.data,t=template("news-item",{newes:e}),i=$(".list-inner-group");i.empty(),i.append(t),o.page=2,o.category_id=a,r.addClass("active").siblings().removeClass("active")}}})})},Index.prototype.listenLoadMoreEvent=function(){var i=this;$("#load-more-btn").click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var e=n.data,t=template("news-item",{newes:e});$(".list-inner-group").append(t),i.page+=1}}})})},$(function(){(new Banner).run(),(new Index).run()});